require("input",function(e,t,n){function i(e,t,n,i){if(t.type&&"+"==t.type.charAt(t.type.length-1))return void r(t,n,i);var a=v.value(n,t.id),d=o(t.type),u=new s({wide:!0,label:t.caption,list:d.list,placeholder:c.expand(a.old,t.type),value:c.expand(a.new,t.type)});l.bind(u,"value",function(e){if("string"==typeof e){if(e=e.trim(),0==e.length)delete i.data[t.id];else{var r=d.map[e.toLowerCase()];i.data[t.id]=r||e}v.save(n)}}),f.add(e,f.div([f.div([u])])),r(e,u,t,n,i)}function r(e,t,n,i,r){for(var o=n,p=n,f=0,l={},s=a(y.value.types[n.type],l);null!=(p=u(o));)t=d(e,r,l,t,i,n,p,f,s),f++,o=p}function a(e,t,n,i,r){if("undefined"==typeof e)return[];"undefined"==typeof n&&(n=0),"undefined"==typeof i&&(i=[]),i.length<=n&&i.push({});var d,u;for(d in e.children)u=e.children[d],t[u.caption.trim().toUpperCase()]=d,n>0&&(i[n-1][r]?i[n-1][r].push(u.caption):i[n-1][r]=[u.caption]),a(u,t,n+1,i,d);return i}function d(e,t,n,i,r,a,d,u,o){var p=y.value.types[a.type],h=v.value(r,d.id),m=new s({wide:!0,label:d.caption,placeholder:c.expand(h.old,p,u),value:c.expand(h.new,p,u)});return f.css(m,{"margin-left":1+u+"rem"}),l.bind(m,"focus",function(e){if(e){var t=i.value.trim().toUpperCase(),r=n[t];m.list=o[u][r||t]||[]}}),l.bind(m,"value",function(e){if("string"==typeof e){if(e=e.trim(),0==e.length)delete t.data[d.id];else{var i=n[e.trim().toUpperCase()];t.data[d.id]=i||e}v.save(r)}}),f.add(e,m),m}function u(e){if("undefined"==typeof e.children)return null;var t;for(t in e.children)return e.children[t];return null}function o(e){if("undefined"==typeof e)return m;if(e=y.value.types[e],"undefined"==typeof e)return m;if(e=e.children,"undefined"==typeof e)return m;var t,n,i=[],r={};for(t in e)n=e[t],i.push(n.caption),r[n.caption.toLowerCase()]=t;return i.sort(),{list:i,map:r}}var p=function(){function t(){return i(n,arguments)}var n={en:{},fr:{}},i=e("$").intl;return t.all=n,t}(),f=e("dom"),l=e("tfw.data-binding"),s=e("wdg.text"),c=e("format"),v=e("patients"),y=e("structure"),h=function(e){var t,n=f.elem(this,"div","input");if("undefined"==typeof e.patient)throw Error("[input] Missing mandatory argument: `patient`!");var r=e.patient;t=v.lastVisit(r);var a=e.def;i(n,a,r,t)},m={list:[],map:{}};t.exports=h,t.exports._=p});
//# sourceMappingURL=input.js.map