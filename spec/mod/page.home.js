require("page.home",function(e,t){function r(){return a(n,arguments)}var n={en:{},fr:{}},a=require("$").intl,i=require("dom"),o=require("tfw.data-binding"),u=require("form"),d=require("data"),l=require("format"),c=require("wdg.button"),s=require("structure"),f=require("tfw.local-download");e.onPage=function(){var e=s.patient,t=new u(e),r=document.getElementById("search-form");i.clear(r);var n=document.getElementById("search-result");i.clear(n);var a=document.getElementById("search-button");i.clear(a),i.add(r,t),t.focus=!0;var f=new c({text:"Enregistrer un nouveau patient",enabled:!1,icon:"plus"});i.add("search-button",f),o.bind(t,"value",function(r){var a=d.findPatients(r);i.clear(n),a.length>0&&a.forEach(function(e){var t=d.getPatient(e),r=new c({type:"simple",text:l.getPatientCaption(t),href:"#Patient/"+e,wide:!0});i.add(n,i.tag("li",[r]))});var o,u,s=t.keys;f.enabled=!0,f.visible=!0;for(var v=0;v<s.length;v++)if(o=s[v],!(Array.isArray(e[o].tags)&&e[o].tags.indexOf("OPTIONAL")>-1||(u=r[o],u&&0!=u.trim().length)))return void(f.enabled=!1)}),f.on(function(){var e=d.newPatient(t.value);location.hash="Patient/"+e})},e.onExport=function(){var e=d.export();f.saveAs(e,"base.json","application/json")},t.exports._=r});
//# sourceMappingURL=page.home.js.map