require("page.home",function(t,e,n){var a=function(){function e(){return a(n,arguments)}var n={en:{},fr:{}},a=t("$").intl;return e.all=n,e}(),r=t("dom"),o=t("x-widget").getById,i=t("tfw.data-binding"),d=t("$").config,s=t("form"),u=t("data"),c=(t("wdg.modal"),t("format")),l=t("wdg.button"),f=t("structure"),v=t("tfw.local-download");n.onPage=function(){r("version").textContent="Version "+d.version+" - "+d.date.substr(0,10);var t=u.countPatients();o("patients-count").text=t+" patient"+(t<2?"":"s");var e=f.patient,n=new s(e),a=document.getElementById("search-form");r.clear(a);var v=document.getElementById("search-result");r.clear(v);var g=document.getElementById("search-button");r.clear(g),r.add(a,n),n.focus=!0;var m=new l({text:"Enregistrer un nouveau patient",enabled:!1,icon:"plus"});r.add("search-button",m),i.bind(n,"value",function(t){var a=u.findPatients(t);r.clear(v),a.length>0&&a.forEach(function(t){var e=u.getPatient(t),n=new l({type:"simple",text:c.getPatientCaption(e),href:"#Patient/"+t,wide:!0});r.add(v,r.tag("li",[n]))});var o,i,d=n.keys;m.enabled=!0,m.visible=!0;for(var s=0;s<d.length;s++)if(o=d[s],!(Array.isArray(e[o].tags)&&e[o].tags.indexOf("OPTIONAL")>-1||(i=t[o],i&&0!=i.trim().length)))return void(m.enabled=!1)}),m.on(function(){var t=u.newPatient(n.value);location.hash="Patient/"+t})},n.onExport=function(){var t=u.export();v.saveAs(t,"base.json","application/json")},e.exports._=a});
//# sourceMappingURL=page.home.js.map