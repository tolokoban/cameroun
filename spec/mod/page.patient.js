require("page.patient",function(e,t,i){function n(){return o(s,arguments)}var a,s={en:{},fr:{}},o=e("$").intl,r=e("dom"),d=e("x-widget").getById,l=e("data"),c=e("wdg.modal"),u=e("format");i.onPage=function(){var e=location.hash.split("/"),t=e[1];a=l.getPatient(t),document.getElementById("patient.title").textContent=u.getPatientCaption(a);var i=document.getElementById("patient.hint"),n=d("patient.exit");if(n.visible=!1,Array.isArray(a.$admissions)&&0!=a.$admissions.length){var s=a.$admissions[a.$admissions.length-1];"undefined"==typeof s.exit?(i.innerHTML="Ce patient est admis dans ce service depuis<br/><b>"+u.date(s.enter)+"</b>.",n.visible=!0):i.innerHTML="Ce patient a été admis dans ce service du <ul><li><b>"+u.date(s.enter)+"</b></li><li>au <b>"+u.date(s.exit)+"</b>.</li></ul>"}else i.textContent="Ce patient n'a encore jamais été admis dans ce service."},i.onNewVisit=function(){var e=l.getLastVisit(a);if(!e||e.exit)e=l.createVisit(a),location.hash="#Visit/"+a.$id;else{var t=r.div(["Une visite débutée ",r.tag("b",[u.date(e.enter)])," n'a pas été cloturée.",r.tag("br"),"Voulez-vous la poursuivre ?",r.tag("hr"),r.tag("em",["Si vous choisissez NON, nous créerons une nouvelle rencontre."])]);c.confirm(t,function(){location.hash="#Visit/"+a.$id},function(){e.exit=e.enter,l.createVisit(a),location.hash="#Visit/"+a.$id})}},t.exports._=n});
//# sourceMappingURL=page.patient.js.map