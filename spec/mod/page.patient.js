require("page.patient",function(e,t,i){var n,a=function(){function t(){return n(i,arguments)}var i={en:{},fr:{}},n=e("$").intl;return t.all=i,t}(),s=e("dom"),o=e("x-widget").getById,r=e("data"),d=e("wdg.modal"),l=e("format");i.onPage=function(){var e=location.hash.split("/"),t=e[1];n=r.getPatient(t),document.getElementById("patient.title").textContent=l.getPatientCaption(n);var i=document.getElementById("patient.hint"),a=o("patient.exit");if(a.visible=!1,Array.isArray(n.$admissions)&&0!=n.$admissions.length){var s=n.$admissions[n.$admissions.length-1];"undefined"==typeof s.exit?(i.innerHTML="Ce patient est admis dans ce service depuis<br/><b>"+l.date(s.enter)+"</b>.",a.visible=!0):i.innerHTML="Ce patient a été admis dans ce service du <ul><li><b>"+l.date(s.enter)+"</b></li><li>au <b>"+l.date(s.exit)+"</b>.</li></ul>"}else i.textContent="Ce patient n'a encore jamais été admis dans ce service."},i.onNewVisit=function(){var e=r.getLastVisit(n);if(!e||e.exit)e=r.createVisit(n),location.hash="#Visit/"+n.$id;else{var t=s.div(["Une visite débutée ",s.tag("b",[l.date(e.enter)])," n'a pas été cloturée.",s.tag("br"),"Voulez-vous la poursuivre ?",s.tag("hr"),s.tag("em",["Si vous choisissez NON, nous créerons une nouvelle rencontre."])]);d.confirm(t,function(){location.hash="#Visit/"+n.$id},function(){e.exit=e.enter,r.createVisit(n),location.hash="#Visit/"+n.$id})}},t.exports._=a});
//# sourceMappingURL=page.patient.js.map