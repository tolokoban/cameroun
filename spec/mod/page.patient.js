require("page.patient",function(e,t){function i(){return s(a,arguments)}var n,a={en:{},fr:{}},s=require("$").intl,r=require("dom"),o=require("x-widget").getById,d=require("data"),u=require("wdg.modal"),l=require("format");e.onPage=function(){var e=location.hash.split("/"),t=e[1];n=d.getPatient(t),document.getElementById("patient.title").textContent=l.getPatientCaption(n);var i=document.getElementById("patient.hint"),a=o("patient.exit");if(a.visible=!1,Array.isArray(n.$admissions)&&0!=n.$admissions.length){var s=n.$admissions[n.$admissions.length-1];"undefined"==typeof s.exit?(i.innerHTML="Ce patient est admis dans ce service depuis<br/><b>"+l.date(s.enter)+"</b>.",a.visible=!0):i.innerHTML="Ce patient a été admis dans ce service du <ul><li><b>"+l.date(s.enter)+"</b></li><li>au <b>"+l.date(s.exit)+"</b>.</li></ul>"}else i.textContent="Ce patient n'a encore jamais été admis dans ce service."},e.onNewVisit=function(){var e=d.getLastVisit(n);if(!e||e.exit)e=d.createVisit(n),location.hash="#Visit/"+n.$id;else{var t=r.div(["Une visite débutée ",r.tag("b",[l.date(e.enter)])," n'a pas été cloturée.",r.tag("br"),"Voulez-vous la poursuivre ?",r.tag("hr"),r.tag("em",["Si vous choisissez NON, nous créerons une nouvelle rencontre."])]);u.confirm(t,function(){location.hash="#Visit/"+n.$id},function(){e.exit=e.enter,d.createVisit(n),location.hash="#Visit/"+n.$id})}},t.exports._=i});
//# sourceMappingURL=page.patient.js.map