require("form",function(e,t,n){function i(e,t){var n,i,r,c,d,p=this,s=[],v=function(e){if(!p._lockValueGet){var t={};s.forEach(function(e){var n,i=e.value;"string"==typeof i&&(n=e.$map[i.trim().toLowerCase()],"undefined"!=typeof n&&(i=n)),""!=i&&(t[e.$id]=i)}),p._lockValueSet=!0,p.value=t,p._lockValueSet=!1}},h=0;for(n in t)0==(1&h)&&(r&&a.add(e,r),r=a.div()),h++,i=t[n],d=o(i.type),c="#DATE"==i.type?new l({label:i.caption,wide:!0}):new f({label:i.caption,wide:!0,list:d.list}),c.$id=n,c.$map=d.map,c.$type=i.type,s.push(c),u.bind(c,"value",v),a.add(r,a.div([c]));a.add(e,r);var m;for(m=0;m<s.length-1;m++)u.bind(s[m],"action",s[m+1],"focus",{value:!0});return s}function o(e){if("undefined"==typeof e)return s;if(e=d.value.types[e],"undefined"==typeof e)return s;if(e=e.children,"undefined"==typeof e)return s;var t,n,i=[],o={};for(t in e)n=e[t],i.push(n.caption),o[n.caption.toLowerCase()]=t;return i.sort(),{list:i,map:o}}var r=function(){function t(){return i(n,arguments)}var n={en:{},fr:{}},i=e("$").intl;return t.all=n,t}(),a=e("dom"),u=e("tfw.data-binding"),f=e("wdg.text"),l=e("wdg.date2"),c=e("format"),d=e("structure"),p=function(e){var t=this,n=a.elem(this,"div","form"),o=a.div("table");a.add(n,o);var r=i.call(this,o,e);this._lockValueSet=!1,this._lockValueGet=!1,u.prop(this,"value")(function(e){t._lockValueSet||(t._lockValueGet=!0,r.forEach(function(t){t.value=c.expand(e[t.$id]||"",t.$type)}),t._lockValueGet=!1)}),u.propInteger(this,"level")(function(e){a.css(n,{"margin-left":e+"rem"})}),u.propBoolean(this,"focus")(function(e){e?window.setTimeout(function(){r[0].focus=!0}):r.forEach(function(e){e.focus=!1})}),Object.defineProperty(p.prototype,"keys",{get:function(){var e=[];return r.forEach(function(t){e.push(t.$id)}),e},set:function(e){},configurable:!0,enumerable:!0})},s={list:[],map:{}};t.exports=p,t.exports._=r});
//# sourceMappingURL=form.js.map