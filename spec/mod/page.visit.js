require("page.visit",function(t,i,n){function e(t,i){if("undefined"!=typeof i){var n,s,d,r;for(n in i)s=i[n],"#"==n.charAt(0)?d=new l({def:s,patient:a}):(r=o.div(),d=new c({label:s.caption,content:[r],simple:!0,value:!1}),e(r,s.children)),o.add(t,d)}}var a,s=function(){function i(){return e(n,arguments)}var n={en:{},fr:{}},e=t("$").intl;return i.all=n,i}(),o=t("dom"),d=t("data"),l=(t("form"),t("wdg.modal"),t("input")),r=t("format"),c=t("wdg.showhide"),h=t("structure");n.onPage=function(){var t=location.hash.split("/"),i=t[1];a=d.getPatient(i),document.getElementById("visit.title").textContent=r.getPatientCaption(a);var n=document.getElementById("visit.data");o.clear(n),e(n,h.forms)},n.onClose=function(){var t=d.getLastVisit(a);t.exit=Date.now(),d.save(),location.hash="#Home"},n.onNewVisit=function(){console.info("[page.patient] g_patient=...",a);var t=a.$admissions[a.$admissions.length-1];t?t.exit?(t={enter:Date.now(),visits:[{date:Date.now()}]},a.$admissions.push(t),location.hash="#Visit/"+a.id+"/"+(a.$admissions.length-1)+"/0"):(t=a.$admissions[a.$admissions.length-1],location.hash="#Visit/"+a.id+"/"+(a.$admissions.length-1)+"/"+(t.visits.length-1)):(t={enter:Date.now(),visits:[{date:Date.now()}]},a.$admissions.push(t),location.hash="#Visit/"+a.id+"/0/0")},i.exports._=s});
//# sourceMappingURL=page.visit.js.map