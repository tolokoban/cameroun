require("tfw.data-binding",function(n,e,t){function r(n,e,r,o){var i="function"==typeof o;"undefined"==typeof e[u]&&(e[u]={}),e[u][r]={value:o,event:new f};var a;a="function"==typeof n?function(t){t=n(t),(i||e[u][r].value!==t)&&(e[u][r].value=t,e[u][r].event.fire(t,e,r))}:function(n){(i||e[u][r].value!==n)&&(e[u][r].value=n,e[u][r].event.fire(n,e,r))};var l=o;return i||(l=function(){return e[u][r].value}),Object.defineProperty(e,r,{get:l,set:a,configurable:!1,enumerable:!0}),t.bind.bind(t,e,r)}var o=function(){function e(){return r(t,arguments)}var t={en:{}},r=n("$").intl;return e.all=t,e}();n("polyfill.string");var i=n("dom"),f=n("tfw.listeners"),u="_tfw.data-binding_",a={castArray:function(n){return Array.isArray(n)?n:[n]},castBoolean:function(n){if("boolean"==typeof n)return n;if("string"==typeof n){if(n=n.trim().toLowerCase(),"1"==n||"true"==n||"yes"==n)return!0;if("0"==n||"false"==n||"no"==n)return!1}return"number"==typeof n?!!n:null},castColor:function(n){return""+n},castEnum:function(n){var e=n.map(String.toLowerCase);return function(t){if("number"==typeof t)return n[Math.floor(t)%n.length];if("string"!=typeof t)return n[0];var r=e.indexOf(t.trim().toLowerCase());return r<0&&(r=0),n[r]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castRegexp:function(n){if(n instanceof RegExp)return n;if("string"==typeof n&&0!=n.trim().length)try{return new RegExp(n)}catch(e){console.error("[castRegexp] /"+n+"/ ",e)}return null},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:"string"==typeof n?n.split(",").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return""+n},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var e=new RegExp(n);return e.test.bind(e)}catch(e){console.error("[castValidator] /"+n+"/ ",e)}return function(){return null}}};t.fire=function(n,e,t){var r=n[e];"undefined"==typeof t&&(t=r),n[u][e].value=t,n[u][e].event.fire(n[e],n,e)},t.set=function(n,e,t){"undefined"==typeof n[u]&&(n[u]={}),"undefined"==typeof n[u][e]&&(n[u][e]={}),n[u][e].value=t},t.get=function(n,e){if("undefined"!=typeof n[u]&&"undefined"!=typeof n[u][e])return n[u][e].value},t.prop=r.bind(null,null),t.propToggleClass=function(n,e,t,o){"string"!=typeof o&&(o="");var f={};"string"==typeof t?f[t]=t:Array.isArray(t)?t.forEach(function(n){f[n]=n}):f=t,r(null,n,e)(function(e){var t,r;for(t in f)r=f[t],t==e?i.addClass(n.element,o+r):i.removeClass(n.element,o+r)})},t.propAddClass=function(n,e,t){"undefined"==typeof t&&(t=e),r(a.castBoolean,n,e)(function(e){e?i.addClass(n.element,t):i.removeClass(n.element,t)})},t.propRemoveClass=function(n,e,t){"undefined"==typeof t&&(t=e),r(a.castBoolean,n,e)(function(e){e?i.removeClass(n.element,t):i.addClass(n.element,t)})},t.propArray=r.bind(null,a.castArray),t.propBoolean=r.bind(null,a.castBoolean),t.propColor=r.bind(null,a.castColor),t.propEnum=function(n){return r.bind(null,a.castEnum(n))},t.propInteger=r.bind(null,a.castInteger),t.propRegexp=r.bind(null,a.castRegexp),t.propString=r.bind(null,a.castString),t.propStringArray=r.bind(null,a.castStringArray),t.propUnit=r.bind(null,a.castUnit),t.propValidator=r.bind(null,a.castValidator),t.bind=function(n,e,t,r,o){if("undefined"==typeof n[u]||"undefined"==typeof n[u][e])throw console.error(e+" is not a bindable property of ",n),Error(e+" is not a bindable property!");"undefined"==typeof o&&(o={}),o.value&&(o.converter=function(){return o.value});var i="function"==typeof t?t:function(n,e,i){t[r]="function"==typeof o.converter?o.converter(n):n};return n[u][e].event.add(i),o},t.extend=function(n,e,t){var r,o,i=JSON.parse(JSON.stringify(n));for(r in e)"$"!=r.charAt(0)&&(o=e[r],"undefined"==typeof i[r]?console.error("[tfw.data-binding.extend] Undefined argument: `"+r+"`!"):i[r]=o);if("undefined"!=typeof t){for(r in e)"$"==r.charAt(0)&&Object.defineProperty(t,r,{value:e[r],writable:!1,configurable:!1,enumerable:!1});for(r in i)"$"!=r.charAt(0)&&(t[r]=i[r])}return i},t.converters=a,e.exports._=o});
//# sourceMappingURL=tfw.data-binding.js.map