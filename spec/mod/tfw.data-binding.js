require("tfw.data-binding",function(n,t,r){function e(n,t,e,o){var i="function"==typeof o;void 0===t[l]&&(t[l]={}),t[l][e]={value:o,event:new u};var a;a="function"==typeof n?function(r){r=n(r),(i||t[l][e].value!==r)&&(t[l][e].value=r,t[l][e].event.fire(r,t,e))}:function(n){(i||t[l][e].value!==n)&&(t[l][e].value=n,t[l][e].event.fire(n,t,e))};var f=o;return i||(f=function(){return t[l][e].value}),Object.defineProperty(t,e,{get:f,set:a,configurable:!1,enumerable:!0}),r.bind.bind(r,t,e)}var o=function(){function t(){return e(r,arguments)}var r={en:{}},e=n("$").intl;return t.all=r,t}();n("polyfill.string");var i=n("dom"),a=n("tfw.css").parseUnit,u=n("tfw.listeners"),l="_tfw.data-binding_",f={castArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:[n]},castBoolean:function(n){return"boolean"==typeof n?n:"string"==typeof n?(n=n.trim().toLowerCase(),"0"!=n&&"false"!=n&&"no"!=n&&"null"!=n&&"undefined"!=n):"number"==typeof n?0!=n:null},castColor:function(n){return""+n},castDate:function(n){return"number"==typeof n||"string"==typeof n?new Date(n):n instanceof Date?n:new Date},castEnum:function(n){var t=n.map(String.toLowerCase);return function(r){if("number"==typeof r)return n[Math.floor(r)%n.length];if("string"!=typeof r)return n[0];var e=t.indexOf(r.trim().toLowerCase());return e<0&&(e=0),n[e]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castRegexp:function(n){if(n instanceof RegExp)return n;if("string"==typeof n&&0!=n.trim().length)try{return new RegExp(n)}catch(t){console.error("[castRegexp] /"+n+"/ ",t)}return null},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:"string"==typeof n?n.split(",").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return n?void 0!==n.v?(n.v=parseFloat(n.v),isNaN(n.v)?{v:0,u:"px"}:("string"!=typeof n.u&&(n.u="px"),{v:n.v,u:n.u})):"number"==typeof n?{v:n,u:"px"}:"string"!=typeof n?{v:0,u:"px"}:a(""+n):{v:0,u:"px"}},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var t=new RegExp(n);return t.test.bind(t)}catch(t){console.error("[castValidator] /"+n+"/ ",t)}return function(){return null}}};r.fire=function(n,t,r){var e=n[t];void 0===r&&(r=e),n[l][t].value=r,n[l][t].event.fire(n[t],n,t)},r.set=function(n,t,r){void 0===n[l]&&(n[l]={}),void 0===n[l][t]&&(n[l][t]={}),n[l][t].value=r},r.get=function(n,t){if(void 0!==n[l]&&void 0!==n[l][t])return n[l][t].value},r.prop=e.bind(null,null),r.propToggleClass=function(n,t,r,o){"string"!=typeof o&&(o="");var a={};"string"==typeof r?a[r]=r:Array.isArray(r)?r.forEach(function(n){a[n]=n}):a=r,e(null,n,t)(function(t){var r,e;for(r in a)e=a[r],r==t?i.addClass(n.element,o+e):i.removeClass(n.element,o+e)})},r.propAddClass=function(n,t,r){void 0===r&&(r=t),e(f.castBoolean,n,t)(function(t){t?i.addClass(n.element,r):i.removeClass(n.element,r)})},r.propRemoveClass=function(n,t,r){void 0===r&&(r=t),e(f.castBoolean,n,t)(function(t){t?i.removeClass(n.element,r):i.addClass(n.element,r)})},r.propArray=e.bind(null,f.castArray),r.propBoolean=e.bind(null,f.castBoolean),r.propColor=e.bind(null,f.castColor),r.propDate=e.bind(null,f.castDate),r.propEnum=function(n){return e.bind(null,f.castEnum(n))},r.propInteger=e.bind(null,f.castInteger),r.propRegexp=e.bind(null,f.castRegexp),r.propString=e.bind(null,f.castString),r.propStringArray=e.bind(null,f.castStringArray),r.propUnit=e.bind(null,f.castUnit),r.propValidator=e.bind(null,f.castValidator),r.bind=function(n,t,r,e,o){if(void 0===n[l]||void 0===n[l][t])throw console.error(t+" is not a bindable property of ",n),Error(t+" is not a bindable property!");void 0===o&&(o={}),o.value&&(o.converter=function(){return o.value});var i="function"==typeof r?r:function(n,t,i){r[e]="function"==typeof o.converter?o.converter(n):n};return n[l][t].event.add(i),o},r.extend=function(n,t,r){var e,o,i=JSON.parse(JSON.stringify(n));for(e in t)"$"!=e.charAt(0)&&(o=t[e],void 0===i[e]?console.error("[tfw.data-binding.extend] Undefined argument: `"+e+"`!"):i[e]=o);if(void 0!==r){for(e in t)"$"==e.charAt(0)&&Object.defineProperty(r,e,{value:t[e],writable:!1,configurable:!1,enumerable:!1});for(e in i)"$"!=e.charAt(0)&&(r[e]=i[e])}return i},r.converters=f,t.exports._=o});
//# sourceMappingURL=tfw.data-binding.js.map